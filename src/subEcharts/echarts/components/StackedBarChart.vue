<script setup lang="ts">
import { BarChart } from 'echarts/charts'
import { DatasetComponent, GridComponent, LegendComponent, TooltipComponent } from 'echarts/components'
import * as echarts from 'echarts/core'
import { CanvasRenderer } from 'echarts/renderers'
import { provideEcharts } from 'uni-echarts/shared'

// ç”±äºå°šæœªæ˜ç¡®çš„åŸå› ï¼Œç›®å‰ npm æ’ä»¶çš„ç¼–è¯‘æœºåˆ¶å­˜åœ¨é—®é¢˜
// å°ç¨‹åºç«¯çš„ npm æ’ä»¶å†…éƒ¨æ— æ³•æ­£ç¡®è·å–åˆ°ä¸šåŠ¡ä¾§çš„ echarts
// æ‰€ä»¥éœ€è¦æ‰‹åŠ¨å°† echarts æä¾›ç»™æ’ä»¶ç”¨äºæ„å»ºå›¾è¡¨
provideEcharts(echarts) // ğŸš¨ æ³¨æ„ï¼šnpm æ–¹å¼éœ€è¦æ·»åŠ è¿™ä¸€è¡Œä»£ç 
echarts.use([
  GridComponent,
  LegendComponent,
  TooltipComponent,
  DatasetComponent,
  BarChart,
  CanvasRenderer,
])

const option = ref({
  tooltip: {
    trigger: 'axis',
    axisPointer: {
      type: 'shadow',
    },
    textStyle: {
      // #ifdef MP-WEIXIN
      // ä¸´æ—¶è§£å†³å¾®ä¿¡å°ç¨‹åº tooltip æ–‡å­—é˜´å½±é—®é¢˜
      textShadowBlur: 1,
      // #endif
    },
  },
  legend: {
    data: ['äº§å“A', 'äº§å“B', 'äº§å“C'],
    top: 35,
    left: 'center',
    itemWidth: 12,
    itemHeight: 12,
    textStyle: {
      fontSize: 12,
    },
  },
  grid: {
    left: '8%',
    right: '8%',
    top: '25%',
    bottom: '15%',
    containLabel: true,
  },
  xAxis: {
    type: 'category',
    data: ['Q1', 'Q2', 'Q3', 'Q4'],
    axisLabel: {
      fontSize: 12,
      color: '#666',
    },
    axisLine: {
      lineStyle: {
        color: '#e0e0e0',
      },
    },
    axisTick: {
      show: false,
    },
  },
  yAxis: {
    type: 'value',
    axisLabel: {
      fontSize: 12,
      color: '#666',
    },
    axisLine: {
      show: false,
    },
    axisTick: {
      show: false,
    },
    splitLine: {
      lineStyle: {
        color: '#f0f0f0',
        type: 'dashed',
      },
    },
  },
  series: [
    {
      name: 'äº§å“A',
      type: 'bar',
      stack: 'total',
      emphasis: {
        focus: 'series',
      },
      itemStyle: {
        color: '#5470c6',
        borderRadius: [0, 0, 0, 0],
      },
      data: [120, 132, 101, 134],
    },
    {
      name: 'äº§å“B',
      type: 'bar',
      stack: 'total',
      emphasis: {
        focus: 'series',
      },
      itemStyle: {
        color: '#91cc75',
        borderRadius: [0, 0, 0, 0],
      },
      data: [220, 182, 191, 234],
    },
    {
      name: 'äº§å“C',
      type: 'bar',
      stack: 'total',
      emphasis: {
        focus: 'series',
      },
      itemStyle: {
        color: '#fac858',
        borderRadius: [4, 4, 0, 0],
      },
      data: [150, 212, 201, 154],
    },
  ],
})
</script>

<template>
  <uni-echarts custom-class="h-300px" :option="option" />
</template>
